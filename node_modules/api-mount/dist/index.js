!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ApiMount=t():e.ApiMount=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);Object.defineProperty(t,"mountApi",{enumerable:!0,get:function(){return n.mountApi}})},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(1),t)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mountApi=void 0;var n=r(2);t.mountApi=function(e){var t;return void 0===e&&(e={}),new n.Api({multipleMethodArgs:!0,baseUrl:null!==(t=e.baseUrl)&&void 0!==t?t:"/",requestMethodMapper:function(e){return{requestMethod:"POST",methodName:e}},fetchConfig:e.fetchConfig})}},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(1),t)},function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Api=t.formatMethod=t.getQuery=t.resolveMethodByConvention=void 0;var u=r(2),a=r(3);t.resolveMethodByConvention=function(e){var t=u.ALLOWED_REQUEST_METHODS.find((function(t){return new RegExp(t.toLocaleLowerCase()+"([^a-z].*)?$").test(e)}))||u.DEFAULT_DETECTED_REQUEST_METHOD;if(e.startsWith(t.toLocaleLowerCase())){var r=e.substr(t.length);r.charAt(0)===r.charAt(0).toUpperCase()&&(r=r.charAt(0).toLocaleLowerCase()+r.substr(1),e=r)}return{requestMethod:t,methodName:e}},t.getQuery=function(e){return Object.keys(e).length?"?"+Object.entries(e).map((function(e){var t=e[0],r=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(r)})).join("&"):""},t.formatMethod=function(e){return e.split("/").map((function(e){return a.paramCase(e)})).join("/")},t.Api=function(e){var r,o;return void 0===e&&(e={}),e=n(n({baseUrl:"",multipleMethodArgs:!1,defaultArgsMapper:function(){return{}},argsDeliveryMapper:function(e){return"GET"===e?u.EArgDeliveryType.QUERY:u.EArgDeliveryType.BODY},argsValueMapper:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[2];return r},requestMethodMapper:t.resolveMethodByConvention,apiMethodFormatter:t.formatMethod,requestBodyMapper:function(e){return JSON.stringify(e)},requestQueryMapper:function(e){return t.getQuery(e)},responseMapper:function(e){return e.json()},overrideFetchArgs:function(e,t){return{url:e,requestInit:t}}},e),{fetchConfig:{requestInit:n({method:null,headers:{"Content-Type":"application/json"}},null!==(o=null===(r=e.fetchConfig)||void 0===r?void 0:r.requestInit)&&void 0!==o?o:{})}}),this._proxy=c.call(this,e,!0),c.call(this,e)};var c=function(e,r){var a=this;return void 0===r&&(r=!1),new Proxy(this,{get:function(c,p){if(!r&&!Object.is(a[p],void 0))return a[p].bind(a);var d=function(r){return void 0===r&&(r={}),o(a,void 0,void 0,(function(){var o,a,c,d,v,y,h,b,g,O,_,m,M,E;return i(this,(function(i){switch(i.label){case 0:return o=f(e),a=o.fetchConfig.requestInit,c=o.baseUrl,d=o.requestMethodMapper(p,r),v=d.methodName,y=d.requestMethod,h=l(n(n({},o.defaultArgsMapper(y,p)),r),o,p),a.method=y,c+="/"+o.apiMethodFormatter(v),b=s(h,p,y,o,u.EArgDeliveryType.BODY),g=s(h,p,y,o,u.EArgDeliveryType.QUERY),Object.keys(b).length&&(a.body=o.requestBodyMapper(b)),c+=o.requestQueryMapper(g,t.getQuery),O=o.overrideFetchArgs(c,o.fetchConfig.requestInit),_=O.url,m=O.requestInit,[4,fetch(_,m)];case 1:if((M=i.sent()).ok&&200===M.status)return[3,6];E=void 0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,M.text()];case 3:return E=i.sent(),[3,5];case 4:throw i.sent();case 5:try{E=JSON.parse(E)}catch(e){}throw E;case 6:return[2,o.responseMapper(M)]}}))}))};return e.multipleMethodArgs?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d({args:e})}:d}})},f=function(e){return n(n({},e),{fetchConfig:{requestInit:n({},e.fetchConfig.requestInit)}})},l=function(e,t,r){for(var n in e)e.hasOwnProperty(n)&&(e[n]=t.argsValueMapper(r,n,e[n]));return e},s=function(e,t,r,n,o){var i={};return Object.entries(e).forEach((function(e){var u=e[0],a=e[1];n.argsDeliveryMapper(r,t,u,a)===o&&(i[u]=a)})),i}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DETECTED_REQUEST_METHOD=t.ALLOWED_REQUEST_METHODS=t.EArgDeliveryType=void 0,function(e){e.BODY="BODY",e.QUERY="QUERY"}(t.EArgDeliveryType||(t.EArgDeliveryType={})),t.ALLOWED_REQUEST_METHODS=["GET","POST","PUT","DELETE"],t.DEFAULT_DETECTED_REQUEST_METHOD="POST"},function(e,t,r){"use strict";r.r(t),r.d(t,"paramCase",(function(){return c}));var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e){return e.toLowerCase()}var i=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],u=/[^A-Z0-9]+/gi;function a(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function c(e,t){return void 0===t&&(t={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?i:r,c=t.stripRegexp,f=void 0===c?u:c,l=t.transform,s=void 0===l?o:l,p=t.delimiter,d=void 0===p?" ":p,v=a(a(e,n,"$1\0$2"),f,"\0"),y=0,h=v.length;"\0"===v.charAt(y);)y++;for(;"\0"===v.charAt(h-1);)h--;return v.slice(y,h).split("\0").map(s).join(d)}(e,n({delimiter:"."},t))}(e,n({delimiter:"-"},t))}}])}])}])}));
//# sourceMappingURL=index.js.map